/*! For license information please see pixi.background.bundle.js.LICENSE.txt */
(()=>{"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};function e(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function n(t){return"function"==typeof t}var r=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function i(t){setTimeout((function(){throw t}),0)}var s={closed:!0,next:function(t){},error:function(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;i(t)},complete:function(){}},c=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function u(t){return null!==t&&"object"==typeof t}var a=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),h=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,o=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,h=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof t)o.remove(this);else if(null!==o)for(var l=0;l<o.length;++l)o[l].remove(this);if(n(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(t){e=t instanceof a?p(t.errors):[t]}}if(c(h)){l=-1;for(var f=h.length;++l<f;){var d=h[l];if(u(d))try{d.unsubscribe()}catch(t){e=e||[],t instanceof a?e=e.concat(p(t.errors)):e.push(t)}}}if(e)throw new a(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof t){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function p(t){return t.reduce((function(t,e){return t.concat(e instanceof a?e.errors:e)}),[])}var l=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),f=function(t){function n(e,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=s;break;case 1:if(!e){i.destination=s;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new d(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new d(i,e,r,o)}return i}return e(n,t),n.prototype[l]=function(){return this},n.create=function(t,e,r){var o=new n(t,e,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},n}(h),d=function(t){function r(e,r,o,i){var c,u=t.call(this)||this;u._parentSubscriber=e;var a=u;return n(r)?c=r:r&&(c=r.next,o=r.error,i=r.complete,r!==s&&(n((a=Object.create(r)).unsubscribe)&&u.add(a.unsubscribe.bind(a)),a.unsubscribe=u.unsubscribe.bind(u))),u._context=a,u._next=c,u._error=o,u._complete=i,u}return e(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=o.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):i(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;i(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw t;i(t)}},r.prototype.__tryOrSetError=function(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(i(e),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(f);function b(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new y(t,e))}}var y=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new v(t,this.project,this.thisArg))},t}(),v=function(t){function n(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return e(n,t),n.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},n}(f),m=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function _(t){return t}function w(t){return 0===t.length?_:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var g=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof f)return t;if(t[l])return t[l]()}return t||e||n?new f(t,e,n):new f(s)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,o=e.isStopped;if(n||o)return!1;t=r&&r instanceof f?r:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=x(e))((function(e,r){var o;o=n.subscribe((function(e){try{t(e)}catch(t){r(t),o&&o.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[m]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:w(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=x(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function x(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var E=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};function S(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var I=S(),T=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function O(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var N=function(t){if(t&&"function"==typeof t[m])return r=t,function(t){var e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(T(t))return E(t);if(O(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i),t};if(t&&"function"==typeof t[I])return e=t,function(t){for(var n=e[I]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r,o=u(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function j(t,e){return new g((function(n){var r=new h,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function C(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new g((function(n){var r=new h;return r.add(e.schedule((function(){var o=t[m]();r.add(o.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(O(t))return function(t,e){return new g((function(n){var r=new h;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(T(t))return j(t,e);if(function(t){return t&&"function"==typeof t[I]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new g((function(n){var r,o=new h;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(e.schedule((function(){r=t[I](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof g?t:new g(N(t))}var P=function(t){function n(e){var n=t.call(this)||this;return n.parent=e,n}return e(n,t),n.prototype._next=function(t){this.parent.notifyNext(t)},n.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},n}(f),A=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.notifyNext=function(t){this.destination.next(t)},n.prototype.notifyError=function(t){this.destination.error(t)},n.prototype.notifyComplete=function(){this.destination.complete()},n}(f);function M(t,e){if(!e.closed){if(t instanceof g)return t.subscribe(e);var n;try{n=N(t)(e)}catch(t){e.error(t)}return n}}function D(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(D((function(n,r){return C(t(n,r)).pipe(b((function(t,o){return e(n,t,r,o)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new V(t,n))})}var V=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new k(t,this.project,this.concurrent))},t}(),k=function(t){function n(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e(n,t),n.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},n.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},n.prototype._innerSub=function(t){var e=new P(this),n=this.destination;n.add(e);var r=M(t,e);r!==e&&n.add(r)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(t){this.destination.next(t)},n.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(A);function Y(t,e){return function(n){return n.lift(new $(t,e))}}var $=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new R(t,this.predicate,this.thisArg))},t}(),R=function(t){function n(e,n,r){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return e(n,t),n.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},n}(f);function F(){}function H(t,e,n){return function(r){return r.lift(new B(t,e,n))}}var B=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new W(t,this.nextOrObserver,this.error,this.complete))},t}(),W=function(t){function r(e,r,o,i){var s=t.call(this,e)||this;return s._tapNext=F,s._tapError=F,s._tapComplete=F,s._tapError=o||F,s._tapComplete=i||F,n(r)?(s._context=s,s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||F,s._tapError=r.error||F,s._tapComplete=r.complete||F),s}return e(r,t),r.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},r.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},r.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},r}(f);function U(t){return t&&"function"==typeof t.schedule}function L(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),D(_,t)}function q(t,e){return e?j(t,e):new g(E(t))}var G=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),z=function(t){function n(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return e(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},n}(h),J=function(t){function n(e){var n=t.call(this,e)||this;return n.destination=e,n}return e(n,t),n}(f),K=function(t){function n(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return e(n,t),n.prototype[l]=function(){return new J(this)},n.prototype.lift=function(t){var e=new Q(this,this);return e.operator=t,e},n.prototype.next=function(t){if(this.closed)throw new G;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},n.prototype.error=function(t){if(this.closed)throw new G;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new G;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(e){if(this.closed)throw new G;return t.prototype._trySubscribe.call(this,e)},n.prototype._subscribe=function(t){if(this.closed)throw new G;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new z(this,t))},n.prototype.asObservable=function(){var t=new g;return t.source=this,t},n.create=function(t,e){return new Q(t,e)},n}(g),Q=function(t){function n(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return e(n,t),n.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},n.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},n.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},n.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):h.EMPTY},n}(K);function X(){return function(t){return t.lift(new Z(t))}}var Z=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new tt(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),tt=function(t){function n(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return e(n,t),n.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},n}(f),et=function(t){function n(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return e(n,t),n.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},n.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},n.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new h).add(this.source.subscribe(new rt(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t},n.prototype.refCount=function(){return X()(this)},n}(g),nt=function(){var t=et.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),rt=function(t){function n(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return e(n,t),n.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},n.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},n.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},n}(J);function ot(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new it(r,e));var o=Object.create(n,nt);return o.source=n,o.subjectFactory=r,o}}var it=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},t}();function st(t){return g.create((e=>{function n(t,...n){1===arguments.length?e.next(t):e.next([t,n])}return t.addListener(n),()=>{t.removeListener(n)}}))}function ct(t){return function(e){return e.lift(new ut(t))}}var ut=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new at(t),r=M(this.notifier,new P(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),at=function(t){function n(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return e(n,t),n.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},n.prototype.notifyComplete=function(){},n}(A),ht=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),pt=new g((function(t){return t.complete()}));function lt(t){return t?function(t){return new g((function(e){return t.schedule((function(){return e.complete()}))}))}(t):pt}function ft(t){return function(e){return 0===t?lt():e.lift(new dt(t))}}var dt=function(){function t(t){if(this.total=t,this.total<0)throw new ht}return t.prototype.call=function(t,e){return e.subscribe(new bt(t,this.total))},t}(),bt=function(t){function n(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return e(n,t),n.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},n}(f);let yt=!1;"object"==typeof process&&process.env&&(yt=!1);const vt=yt;class mt{constructor(t,e){this.connection=t,this.data=e.data,this.from=e.from,vt&&console.log(`client[${e.from}] ${e.id?"stream":"on"} "${e.command}" `,e.data),this.id=e.id}respond(t,e){vt&&console.log(`respond "${t}" `,e),this.connection.postMessage({response:t,to:this.from,data:e,id:this.id})}}function _t(t,e){return new g(e?function(n){return e.schedule(wt,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function wt(t){var e=t.error;t.subscriber.error(e)}let gt=1;function xt(t,e,n){return r=()=>{const r=gt;return gt++,t.send(e,n,{id:r}),t.connection.message$.pipe(Y((t=>t.id===r)),H((t=>{if("ERROR"===t.response)throw new Error(t.data)})))},new g((function(t){var e;try{e=r()}catch(e){return void t.error(e)}return(e?C(e):lt()).subscribe(t)}));var r}class Et{constructor(t,e){this.isBroadcast="number"!=typeof e,this.recipient="string"==typeof e?{name:e}:e,this.connection=t}get disconnect$(){return this.isBroadcast?_t(new Error("disconnect$ is not available for broadcast clients")):this.connection.on("DISCONNECTED").pipe(Y((t=>t.from===this.recipient)),ft(1))}send(t,e,n={}){const r=Object.assign({data:e},n);if(this.isBroadcast?(r.broadcast=t,r.filter=Object.assign({tabId:this.recipient.tabId||chrome.devtools&&chrome.devtools.inspectedWindow&&chrome.devtools.inspectedWindow.tabId},this.recipient)):(r.command=t,r.to=this.recipient),vt){const n=r.id?'stream "'+t+'" from':'send "'+t+'" to';void 0===e?console.log(n,this.recipient):console.log(n,this.recipient,e)}this.connection.postMessage(r)}stream(t,e){const n=xt(this,t,e);return this.isBroadcast?n:n.pipe(ct(this.disconnect$))}get(t,e){if(this.isBroadcast)throw new Error("Invalid recipient");return vt&&(1===arguments.length?console.log("client["+this.recipient+'] get "'+t+'"'):console.log("client["+this.recipient+'] get "'+t+'"(',e,")")),xt(this,t,e).pipe(ft(1),b((e=>{if(e.response!==t)throw new Error('Unexpected response "'+e.response+'", expecting "'+t+'"');return e.data})))}set(t,e){if(this.isBroadcast)throw new Error("Invalid recipient");vt&&console.log("client["+this.recipient+'] set "'+t+'" = ',e),this.connection.postMessage({command:t,to:this.recipient,data:e})}}class St{constructor(t){"string"==typeof t&&(t={name:t}),"object"==typeof t&&t.postMessage?this._port=t:this._port=chrome.runtime.connect(t),chrome.devtools&&chrome.devtools.inspectedWindow&&this._port.postMessage({command:"TAB_ID",to:0,data:chrome.devtools.inspectedWindow.tabId})}get name(){return this._port.name}get sender(){return this._port.sender}get message$(){return st(this._port.onMessage).pipe(ct(this.disconnect$),b((([t])=>t)))}get disconnect$(){return st(this._port.onDisconnect).pipe(ft(1))}postMessage(t){return this._port.postMessage(t)}disconnect(){return this._port.disconnect()}on(t){return this.message$.pipe(Y((e=>e.command===t)),b((t=>new mt(this,t))))}to(t){return new Et(this,t)}log(...t){console.info(...t),this.postMessage({command:"LOG",to:0,data:1===t?t[0]:t})}}let It=1;const Tt=st(chrome.runtime.onConnect).pipe(b((t=>{const e=new St(t);return e.id=It,It++,t.sender&&t.sender.tab&&(e.tabId=t.sender.tab.id),e})),ot(new K),X());var Ot,Nt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return e(n,t),n.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},n.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},n.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},n}(function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return e(n,t),n.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},n.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},n.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},n.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},n.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},n}(function(t){function n(e,n){return t.call(this)||this}return e(n,t),n.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},n}(h))),jt=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),Ct=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n}(function(t){function n(e,r){void 0===r&&(r=jt.now);var o=t.call(this,e,(function(){return n.delegate&&n.delegate!==o?n.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return e(n,t),n.prototype.schedule=function(e,r,o){return void 0===r&&(r=0),n.delegate&&n.delegate!==this?n.delegate.schedule(e,r,o):t.prototype.schedule.call(this,e,r,o)},n.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},n}(jt)))(Nt);Ot||(Ot={});var Pt=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return U(n)?(t.pop(),j(t,n)):q(t)}(this.value);case"E":return _t(this.error);case"C":return lt()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),At=function(t){function n(e,n,r){void 0===r&&(r=0);var o=t.call(this,e)||this;return o.scheduler=n,o.delay=r,o}return e(n,t),n.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},n.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new Mt(t,this.destination)))},n.prototype._next=function(t){this.scheduleMessage(Pt.createNext(t))},n.prototype._error=function(t){this.scheduleMessage(Pt.createError(t)),this.unsubscribe()},n.prototype._complete=function(){this.scheduleMessage(Pt.createComplete()),this.unsubscribe()},n}(f),Mt=function(){return function(t,e){this.notification=t,this.destination=e}}(),Dt=function(t){function n(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var o=t.call(this)||this;return o.scheduler=r,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return e(n,t),n.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,e)},n.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new Vt(this._getNow(),e)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,e)},n.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new G;if(this.isStopped||this.hasError?e=h.EMPTY:(this.observers.push(t),e=new z(this,t)),o&&t.add(t=new At(t,o)),n)for(var s=0;s<i&&!t.closed;s++)t.next(r[s]);else for(s=0;s<i&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},n.prototype._getNow=function(){return(this.scheduler||Ct).now()},n.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return o>e&&(i=Math.max(i,o-e)),i>0&&r.splice(0,i),r},n}(K),Vt=function(){return function(t,e){this.time=t,this.value=e}}();const kt=g.create((t=>{const e={},n=[],r=Tt.subscribe((r=>{e[r.id]=r,vt&&console.log("connection ["+r.name+" "+r.id+"] added"),t.next(e),n.push(r.disconnect$.subscribe((()=>{vt&&console.log("connection ["+r.name+" "+r.id+"] removed"),delete e[r.id],t.next(e)})))}));return()=>{r.unsubscribe(),n.forEach((t=>t.unsubscribe()))}})).pipe((Rt=new Dt(1,void 0,$t),function(t){return ot((function(){return Rt}),void 0)(t)})),Yt=(kt.connect(),kt);var $t,Rt,Ft=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},n.prototype.notifyError=function(t,e){this.destination.error(t)},n.prototype.notifyComplete=function(t){this.destination.complete()},n}(f),Ht=function(t){function n(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return e(n,t),n.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},n.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(f);function Bt(t,e,n,r,o){if(void 0===o&&(o=new Ht(t,n,r)),!o.closed)return e instanceof g?e.subscribe(o):N(e)(o)}function Wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new Ut(r,n))}}var Ut=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new Lt(t,this.observables,this.project))},t}(),Lt=function(t){function n(e,n,r){var o=t.call(this,e)||this;o.observables=n,o.project=r,o.toRespond=[];var i=n.length;o.values=new Array(i);for(var s=0;s<i;s++)o.toRespond.push(s);for(s=0;s<i;s++){var c=n[s];o.add(Bt(o,c,void 0,s))}return o}return e(n,t),n.prototype.notifyNext=function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var o=r.indexOf(n);-1!==o&&r.splice(o,1)}},n.prototype.notifyComplete=function(){},n.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},n.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},n}(Ft);const qt={},Gt=Tt.pipe(D((t=>function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,o=t[t.length-1];return U(o)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof g?t[0]:L(n)(q(t,r))}(t.disconnect$.pipe(Wt(Yt),H((([,e])=>{if(qt[t.id]){let n=0;for(const r of Object.keys(qt[t.id]))e[r]&&(e[r].postMessage({command:"DISCONNECTED",from:t.id,name:t.name}),n++);delete qt[t.id],vt&&console.log("client["+t.name+" "+t.id+"] disconnected from "+n+" clients")}else vt&&console.log("client["+t.name+" "+t.id+"] disconnected")}))),t.message$.pipe(Wt(Yt),H((([e,n])=>{if(e.broadcast){const r={command:e.broadcast,from:t.id,id:e.id,data:e.data},o=e.filter;o.tabId||(o.tabId=t.tabId);const i=Object.values(n).filter((e=>!(e.id===t.id||o.name&&e.name!==o.name||o.names&&-1===o.names.indexOf(e.name)||o.tabId&&(!e.tabId||e.tabId!==o.tabId))));vt&&console.log("client["+t.name+" "+t.id+'] broadcast "'+r.command+'" to '+i.length+" clients"),i.forEach((t=>{t.postMessage(r)}))}else if(0===e.to)if("TAB_ID"===e.command)t.tabId=e.data;else if("LOG"===e.command){const n="Log ["+t.name+" "+t.id+"]";Array.isArray(e.data)?console.info(n,...e.data):console.info("Log ["+t.name+" "+t.id+"]",e.data)}else vt&&console.warn("Connection["+t.name+" "+t.id+"]",e);else if(e.to){const r=n[e.to];if(!r)return vt&&console.log("Couldn't relay message",e,n),void t.postMessage({response:"ERROR",data:"DISCONNECTED",id:e.id});qt[r.id]=qt[r.id]||{},qt[r.id][t.id]=!0;const o=Object.assign({},e);o.from=t.id,0!==t.sender.frameId&&(o.frameURL=t.sender.url),delete o.to,vt&&console.log("Relay message from "+t.id+" to "+r.id,o),r.postMessage(o)}else console.warn("to: is required for",e,"from",t)})))))));console.info("pixi.background",{debug:!1}),Gt.subscribe(),Tt.pipe(D((t=>t.message$.pipe(Y((t=>"DETECTED"===t.broadcast))).pipe(H((e=>{const n=t.tabId;if(chrome.pageAction.show(n),e.data.phaser)chrome.pageAction.setTitle({tabId:n,title:"Phaser "+e.data.phaser+"( PixiJS "+e.data.version+" )"}),chrome.pageAction.setIcon({tabId:n,path:{16:"icons/phaser@1x.png",32:"icons/phaser@2x.png"}});else{chrome.pageAction.setTitle({tabId:n,title:"PixiJS "+e.data.version});const t=parseInt(e.data.version,10);t>=3&&t<=6?chrome.pageAction.setIcon({tabId:n,path:{16:"icons/v"+t+"@1x.png",32:"icons/v"+t+"@2x.png"}}):chrome.pageAction.setIcon({tabId:n,path:{16:"icons/page_action@1x.png",32:"icons/page_action@2x.png"}})}})))))).subscribe()})();